<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
  <head>
    <title>test.html</title>
	
    <meta http-equiv="keywords" content="keyword1,keyword2,keyword3">
    <meta http-equiv="description" content="this is my page">
    <meta http-equiv="content-type" content="text/html; charset=UTF-8">
    
    <!--<link rel="stylesheet" type="text/css" href="./styles.css">-->
	<script type="text/javascript">
	    var url ="";
		function createURL(){
		    var date = new Date(); 
			var urltext = document.getElementById("urltext");
			var subject = document.getElementById("subject").value;
			var body = document.getElementById("body").value;
			var price = document.getElementById("price").value;
			var quantity = document.getElementById("quantity").value;
			var total_fee = document.getElementById("total_fee").value;
			var return_url = document.getElementById("return_url").value;
			var notify_url = document.getElementById("notify_url").value;
			var out_trade_no = document.getElementById("out_trade_no");
			var bank = document.getElementById("bank").value;
			out_trade_no.value = "F"+date.getFullYear()+((date.getMonth()+1)>9?(date.getMonth()+1):'0' + (date.getMonth()+1))+(date.getDate()>9?date.getDate():'0' + date.getDate())+(date.getHours()>9?date.getHours():'0' + date.getHours())+(date.getMinutes()>9?date.getMinutes():'0' + date.getMinutes())+(date.getSeconds()>9?date.getSeconds():'0' + date.getSeconds()); 
			
			urltext.value = "https://www.qmpay.com/cooperate/gateway.do?_input_charset=UTF-8&bank="+bank+"&body="+body+"&notify_url="+notify_url+"&out_trade_no="+out_trade_no.value+"&partner=2088001636104896&payment_type=1&return_url="+return_url+"&price="+price+"&quantity="+quantity+"&royalty_type=10&seller_email=pay@160.la&service=create_direct_pay_for_no_account&subject="+subject+"&total_fee="+total_fee+"&sign=3f81d0b0a09f47f72c8004e379f88673&sign_type=MD5";
			url = urltext.value;
		}
		
		function pay(){
			form1.action = url;
			form1.submit();
		}
	</script>
  </head>
  
  <body onload="createURL()">
     <form action="" method="post" name="form1">
     	<table>
     		<tr>
     			<td>商品名称:</td>
     			<td><input type="text" name="subject" id="subject" value="测试" onblur="createURL()" style="width:250"/></td>
     		</tr>
     		<tr>
     			<td>商品描述:</td>
     			<td><input type="text" name="body" id="body" value="房产网测试的" onblur="createURL()" style="width:250"/></td>
     		</tr>
     		<tr>
     			<td>商品单价:</td>
     			<td><input type="text" name="price" id="price" value="0.01" onblur="createURL()" style="width:250"/></td>
     		</tr>
     		<tr>
     			<td>购买数量:</td>
     			<td><input type="text" name="quantity" id="quantity" value="1" onblur="createURL()" style="width:250"/></td>
     		</tr>
     		<tr>
     			<td>总价格:</td>
     			<td><input type="text" name="total_fee" id="total_fee" value="0.01" onblur="createURL()" style="width:250"/></td>
     		</tr>
     		<tr>
     			<td>交易号:</td>
     			<td><input type="text" name="out_trade_no" id="out_trade_no" value="" onblur="createURL()" style="width:250"/></td>
     		</tr>
     		<tr>
     			<td>通知URL:</td>
     			<td><input type="text" name="notify_url" style="width:250" value="https://www.qmpay.com/cooperate/receive.do" id="notify_url" onblur="createURL()"/>
     			    这里是您平台的一个URL，用来异步接收钱门返回支付的结果信息。现在默认设置了一个钱门的路径用于演示。
     			</td>
     		</tr>
     		<tr>
     			<td>返回URL:</td>
     			<td><input type="text" name="return_url" style="width:250" value="https://www.qmpay.com/cooperate/receive.do" id="return_url" onblur="createURL()"/>
     			   这里是您平台的一个URL，用来同步接收钱门返回支付的结果信息。现在默认设置了一个钱门的路径用于演示。
     			</td>
     		</tr> 
     		<tr>
     			<td>提交的URL:</td>
     			<td><textarea rows="5" cols="80" name="urltext" id="urltext"></textarea></td>
     		</tr>
     		<tr>
     			<td>选择银行:</td>
     			<td>
     				<select name="bank" id="bank" onchange="createURL()">
     					<option value="CCB">建设银行</option>
     					<option value="ICBC">工商银行</option>
     					<option value="ABC">农业银行</option>
     					<option value="CMBC">民生银行</option>
     				</select>
     			</td>
     		</tr>
     		<tr>
     			<td><input type="button" name="bb" value="钱门支付" onclick="pay()"/> </td>	
     		</tr>
     	</table>
     	<p>
     	<span>说明 : 商品单价,购买数量,总价格 必须是数字,要不然会报来源不合法,以上的还没有验证签名,只供测试用</span>
     </form>
  </body>
</html>
